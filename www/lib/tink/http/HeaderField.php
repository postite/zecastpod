<?php
/**
 * Generated by Haxe 4.0.0 (git build development @ 3018ab1)
 */

namespace tink\http;

use \tink\http\_Header\HeaderValue_Impl_;
use \php\Boot;
use \php\_Boot\HxString;
use \tink\http\_Header\HeaderName_Impl_;
use \tink\core\NamedWith;
use \php\_Boot\HxAnon;

class HeaderField extends NamedWith {
	/**
	 * @param string $s
	 * 
	 * @return HeaderField
	 */
	static public function ofString ($s) {
		#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:253: characters 19-33
		$_g = HxString::indexOf($s, ":");
		#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:253: characters 19-33
		if ($_g === -1) {
			#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:255: characters 9-33
			return new HeaderField(HeaderName_Impl_::ofString($s), null);
		} else {
			#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:258: characters 25-29
			$tmp = HeaderName_Impl_::ofString(HxString::substr($s, 0, $_g));
			#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:258: characters 9-54
			return new HeaderField($tmp, trim(HxString::substr($s, $_g + 1)));
		}
	}


	/**
	 * Constructs a Set-Cookie header. Please note that cookies are HttpOnly by default.
	 * You can opt out of that behavior by setting `options.scriptable` to true.
	 * 
	 * @param string $key
	 * @param string $value
	 * @param object $options
	 * 
	 * @return HeaderField
	 */
	static public function setCookie ($key, $value, $options = null) {
		#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:267: lines 267-268
		if ($options === null) {
			#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:268: characters 7-20
			$options = new HxAnon();
		}
		#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:270: characters 5-31
		$buf = new \StringBuf();
		#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:279: characters 5-55
		$buf->add((rawurlencode($key)??'null') . "=" . (rawurlencode($value)??'null'));
		#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:281: lines 281-282
		if ($options->expires !== null) {
			#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:282: characters 7-57
			$value1 = HeaderValue_Impl_::ofDate($options->expires);
			#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:282: characters 7-57
			if ($value1 !== null) {
				#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:282: characters 7-57
				$buf->add("; ");
				#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:282: characters 7-57
				$buf->add("expires=");
				#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:282: characters 7-57
				$buf->add($value1);
			}
		}
		#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:284: characters 5-39
		$value2 = $options->domain;
		#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:284: characters 5-39
		if ($value2 !== null) {
			#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:284: characters 5-39
			$buf->add("; ");
			#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:284: characters 5-39
			$buf->add("domain=");
			#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:284: characters 5-39
			$buf->add($value2);
		}

		#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:285: characters 5-35
		$value3 = $options->path;
		#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:285: characters 5-35
		if ($value3 !== null) {
			#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:285: characters 5-35
			$buf->add("; ");
			#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:285: characters 5-35
			$buf->add("path=");
			#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:285: characters 5-35
			$buf->add($value3);
		}

		#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:287: characters 5-46
		if ($options->secure) {
			#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:287: characters 25-46
			$buf->add("; ");
			#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:287: characters 25-46
			$buf->add("secure");
			#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:287: characters 25-46
			$buf->add("");
		}
		#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:288: characters 5-60
		if ($options->scriptable !== true) {
			#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:288: characters 37-60
			$buf->add("; ");
			#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:288: characters 37-60
			$buf->add("HttpOnly");
			#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:288: characters 37-60
			$buf->add("");
		}
		#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:290: characters 5-55
		return new HeaderField("set-cookie", $buf->b);
	}


	/**
	 * @param string $name
	 * @param string $value
	 * 
	 * @return void
	 */
	public function __construct ($name, $value) {
		#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:245: lines 245-292
		parent::__construct($name, $value);
	}


	/**
	 * @return string
	 */
	public function toString () {
		#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:249: lines 249-250
		if ($this->value === null) {
			#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:249: characters 26-30
			return $this->name;
		} else {
			#/Users/ut/haxe/haxe_libraries/tink_http/0.8.2/github/403eb075dff5d7b8ec4a9e08052eb01e1e196722/src/tink/http/Header.hx:250: characters 13-26
			return "" . ($this->name??'null') . ": " . ($this->value??'null');
		}
	}


	public function __toString() {
		return $this->toString();
	}
}


Boot::registerClass(HeaderField::class, 'tink.http.HeaderField');
