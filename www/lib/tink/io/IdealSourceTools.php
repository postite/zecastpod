<?php
/**
 * Generated by Haxe 4.0.0 (git build development @ 3018ab1)
 */

namespace tink\io;

use \tink\core\Outcome;
use \tink\chunk\ChunkObject;
use \php\Boot;
use \tink\core\_Future\FutureObject;
use \tink\core\MPair;
use \tink\streams\StreamObject;
use \tink\io\_Source\Source_Impl_;
use \php\_Boot\HxAnon;
use \tink\io\_StreamParser\StreamParser_Impl_;

class IdealSourceTools {
	/**
	 * @param StreamObject $s
	 * 
	 * @return FutureObject
	 */
	static public function all ($s) {
		#/Users/ut/haxe/haxe_libraries/tink_io/0.6.2/haxelib/src/tink/io/Source.hx:199: lines 199-201
		return Source_Impl_::concatAll($s)->map(function ($o) {
			#/Users/ut/haxe/haxe_libraries/tink_io/0.6.2/haxelib/src/tink/io/Source.hx:200: characters 24-25
			return $o->params[0];
		})->gather();
	}


	/**
	 * @param StreamObject $s
	 * @param StreamParserObject $p
	 * 
	 * @return FutureObject
	 */
	static public function parse ($s, $p) {
		#/Users/ut/haxe/haxe_libraries/tink_io/0.6.2/haxelib/src/tink/io/Source.hx:204: lines 204-207
		return StreamParser_Impl_::parse($s, $p)->map(function ($r) {
			#/Users/ut/haxe/haxe_libraries/tink_io/0.6.2/haxelib/src/tink/io/Source.hx:204: lines 204-207
			switch ($r->index) {
				case 0:
					#/Users/ut/haxe/haxe_libraries/tink_io/0.6.2/haxelib/src/tink/io/Source.hx:205: characters 32-61
					return Outcome::Success(new MPair($r->params[0], $r->params[1]));
					break;
				case 1:
					#/Users/ut/haxe/haxe_libraries/tink_io/0.6.2/haxelib/src/tink/io/Source.hx:206: characters 27-37
					return Outcome::Failure($r->params[0]);
					break;
			}
		})->gather();
	}


	/**
	 * @param StreamObject $s
	 * @param StreamParserObject $p
	 * 
	 * @return StreamObject
	 */
	static public function parseStream ($s, $p) {
		#/Users/ut/haxe/haxe_libraries/tink_io/0.6.2/haxelib/src/tink/io/Source.hx:210: characters 5-42
		return StreamParser_Impl_::parseStream($s, $p);
	}


	/**
	 * @param StreamObject $s
	 * @param ChunkObject $delim
	 * 
	 * @return object
	 */
	static public function split ($s, $delim) {
		#/Users/ut/haxe/haxe_libraries/tink_io/0.6.2/haxelib/src/tink/io/Source.hx:213: characters 5-63
		$s1 = RealSourceTools::split($s, $delim);
		#/Users/ut/haxe/haxe_libraries/tink_io/0.6.2/haxelib/src/tink/io/Source.hx:216: characters 15-65
		$tmp = RealSourceTools::idealize($s1->before, function ($e) {
			#/Users/ut/haxe/haxe_libraries/tink_io/0.6.2/haxelib/src/tink/io/Source.hx:216: characters 45-64
			return Source_Impl_::$EMPTY;
		});
		#/Users/ut/haxe/haxe_libraries/tink_io/0.6.2/haxelib/src/tink/io/Source.hx:217: characters 18-29
		$s2 = $s1->delimiter;
		#/Users/ut/haxe/haxe_libraries/tink_io/0.6.2/haxelib/src/tink/io/Source.hx:215: lines 215-219
		return new HxAnon([
			"before" => $tmp,
			"delimiter" => $s2,
			"after" => RealSourceTools::idealize($s1->after, function ($e1) {
				#/Users/ut/haxe/haxe_libraries/tink_io/0.6.2/haxelib/src/tink/io/Source.hx:218: characters 43-62
				return Source_Impl_::$EMPTY;
			}),
		]);
	}
}


Boot::registerClass(IdealSourceTools::class, 'tink.io.IdealSourceTools');
